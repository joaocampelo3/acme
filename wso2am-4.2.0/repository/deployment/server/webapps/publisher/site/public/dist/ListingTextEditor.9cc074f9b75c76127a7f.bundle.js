(this.webpackJsonp=this.webpackJsonp||[]).push([[3],{2376:function(e,t,a){"use strict";a.r(t),function(e){var n,r=a(0),o=a.n(r),i=a(21),s=a(34),c=a(144),l=a(28),p=a.n(l),u=a(84),d=a(1643),f=a(5204),m=a(1651),b=a(91),h=a(5224),y=a(5217),E=a(382),g=a(1601),v=a(5018),S=a(5019),j=a.n(S),C=a(5020),O=a.n(C),w=a(721),A=a(815),x=a(727),T=a(723),D=a(100),k=a(5216);function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o,i,s=[],c=!0,l=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;c=!1}else for(;!(c=(n=o.call(a)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){l=!0,r=e}finally{try{if(!c&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(l)throw r}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function M(){return(M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var P="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},H={appBar:{position:"relative"},flex:{flex:1},popupHeader:{display:"flex",flexDirection:"row",alignItems:"center"},splitWrapper:{padding:0},docName:{alignItems:"center",display:"flex"},button:{height:30,marginLeft:30}};function L(e){return o.a.createElement(h.a,M({direction:"up"},e))}function G(e){var t=this,a=e.intl,n=(e.apiType,e.showAtOnce),i=e.history,c=e.docId,l=Object(r.useContext)(T.c),p=l.api,u=l.isAPIProduct,h=I(Object(r.useState)(n),2),S=h[0],C=h[1],N=I(Object(r.useState)(g.EditorState.createEmpty()),2),M=N[0],P=N[1],H=I(Object(r.useState)(!1),2),G=H[0],R=H[1],q=function(){if(S||U(),S&&n){var e="/".concat(u?"api-products":"apis","/").concat(p.id,"/documents");i.push(e)}C(!S)},U=function(){(u?new A.a:new w.a).getInlineContentOfDocument(p.id,c).then((function(e){var t=O()(e.text);if(t){var a=g.ContentState.createFromBlockArray(t.contentBlocks),n=g.EditorState.createWithContent(a);P(n)}})).catch((function(e){404===e.status&&t.setState({apiNotFound:!0})}))},B=e.classes,W=e.docName;return o.a.createElement("div",null,o.a.createElement(d.a,{onClick:q,disabled:Object(D.b)(["apim:api_create","apim:api_publish"],p)||p.isRevision,"aria-label":"Edit Content of "+W},o.a.createElement(y.a,null,"description"),o.a.createElement(s.a,{id:"Apis.Details.Documents.TextEditor.edit.content",defaultMessage:[{type:0,value:"Edit Content"}]})),o.a.createElement(f.a,{fullScreen:!0,open:S,onClose:q,TransitionComponent:L},o.a.createElement(E.a,{square:!0,className:B.popupHeader},o.a.createElement(m.a,{color:"inherit",onClick:q,"aria-label":"Close"},o.a.createElement(y.a,null,"close")),o.a.createElement(b.a,{variant:"h4",className:B.docName},o.a.createElement(s.a,{id:"Apis.Details.Documents.TextEditor.edit.content.of",defaultMessage:[{type:0,value:"Edit Content of"}]})," ",'"',W,'"'),o.a.createElement(d.a,{className:B.button,variant:"contained",disabled:G,color:"primary",onClick:function(){var e=u?new A.a:new w.a;R(!0);var t=j()(Object(g.convertToRaw)(M.getCurrentContent()));e.addInlineContentToDocument(p.id,c,"INLINE",t).then((function(e){x.a.info("".concat(e.obj.name," ").concat(a.formatMessage({id:"Apis.Details.Documents.TextEditor.update.success.message",defaultMessage:[{type:0,value:"updated successfully."}]}))),q(),R(!1)})).catch((function(e){x.a.error("".concat(e," ").concat(a.formatMessage({id:"Apis.Details.Documents.TextEditor.update.error.message",defaultMessage:[{type:0,value:"update failed."}]}))),R(!1)}))}},o.a.createElement(s.a,{id:"Apis.Details.Documents.TextEditor.update.content.button",defaultMessage:[{type:0,value:"Update Content"}]}),G&&o.a.createElement(k.a,{size:24})),o.a.createElement(d.a,{className:B.button,onClick:q},o.a.createElement(s.a,{id:"Apis.Details.Documents.TextEditor.cancel.button",defaultMessage:[{type:0,value:"Cancel"}]}))),o.a.createElement("div",{className:B.splitWrapper},o.a.createElement(v.Editor,{editorState:M,wrapperClassName:"draftjs-wrapper",editorClassName:"draftjs-editor",onEditorStateChange:function(e){P(e)}}))))}P(G,"useContext{{ api, isAPIProduct }}\nuseState{[open, setOpen](showAtOnce)}\nuseState{[editorState, setEditorState](EditorState.createEmpty())}\nuseState{[isUpdating, setIsUpdating](false)}"),G.propTypes={classes:p.a.shape({}).isRequired,docId:p.a.string.isRequired,apiType:p.a.oneOf([w.a.CONSTS.API,w.a.CONSTS.APIProduct]).isRequired,intl:p.a.shape({}).isRequired,showAtOnce:p.a.bool.isRequired,api:p.a.shape({id:p.a.string,apiType:p.a.oneOf([w.a.CONSTS.API,w.a.CONSTS.APIProduct])}).isRequired};var R,q,U=Object(c.c)(Object(i.l)(Object(u.a)(H)(G)));t.default=U,(R="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(R.register(H,"styles","/home/jenkins/workspace/platform-builds/apim-apps/target/checkout/portals/publisher/src/main/webapp/source/src/app/components/Apis/Details/Documents/TextEditor.jsx"),R.register(L,"Transition","/home/jenkins/workspace/platform-builds/apim-apps/target/checkout/portals/publisher/src/main/webapp/source/src/app/components/Apis/Details/Documents/TextEditor.jsx"),R.register(G,"TextEditor","/home/jenkins/workspace/platform-builds/apim-apps/target/checkout/portals/publisher/src/main/webapp/source/src/app/components/Apis/Details/Documents/TextEditor.jsx"),R.register(U,"default","/home/jenkins/workspace/platform-builds/apim-apps/target/checkout/portals/publisher/src/main/webapp/source/src/app/components/Apis/Details/Documents/TextEditor.jsx")),(q="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&q(e)}.call(this,a(43)(e))}}]);
//# sourceMappingURL=ListingTextEditor.9cc074f9b75c76127a7f.bundle.js.map